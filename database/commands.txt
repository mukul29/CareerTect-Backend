DROP SCHEMA IF EXISTS JOB_PORTAL CASCADE;
CREATE SCHEMA JOB_PORTAL;

CREATE TABLE JOB_PORTAL.USER_PERMISSIONS (
    USER_TYPE   SMALLINT PRIMARY KEY NOT NULL,
    SEE_JOBS    BOOLEAN DEFAULT TRUE,
    POST_JOBS   BOOLEAN DEFAULT FALSE
);

CREATE TABLE JOB_PORTAL.USERS (
    USER_ID     SERIAL PRIMARY KEY NOT NULL,
    EMAIL       VARCHAR(100) UNIQUE NOT NULL,
    PASSWORD    TEXT NOT NULL,
    FULLNAME    VARCHAR(50) NOT NULL,
    TYPE        SMALLINT DEFAULT 1 REFERENCES JOB_PORTAL.USER_PERMISSIONS (USER_TYPE)
);

CREATE TABLE JOB_PORTAL.SEEKER (
    SEEKER_ID   SERIAL PRIMARY KEY REFERENCES JOB_PORTAL.USERS (USER_ID)
);

CREATE TABLE JOB_PORTAL.RECRUITER (
    RECRUITER_ID SERIAL PRIMARY KEY REFERENCES JOB_PORTAL.USERS (USER_ID)
);

CREATE TABLE JOB_PORTAL.JOBS (
    JOB_ID      SERIAL PRIMARY KEY NOT NULL,
    TITLE       VARCHAR(100) NOT NULL,
    DESCRIPTION TEXT NOT NULL,
    POSTED_BY   SERIAL REFERENCES JOB_PORTAL.RECRUITER (RECRUITER_ID)
);

CREATE TABLE JOB_PORTAL.JOBS_APPLICANTS (
    JOB_ID      SERIAL REFERENCES JOB_PORTAL.JOBS (JOB_ID),
    APPLICANT_ID SERIAL REFERENCES JOB_PORTAL.SEEKER (SEEKER_ID),
    ACCEPTED    BOOLEAN,
    PRIMARY KEY (JOB_ID, APPLICANT_ID)   
);

INSERT INTO JOB_PORTAL.USER_PERMISSIONS values (1, true, false);
INSERT INTO JOB_PORTAL.USER_PERMISSIONS values (2, false, true);